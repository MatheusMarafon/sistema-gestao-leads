<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gest√£o de Leads</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>
    <div id="app-wrapper">
        <main class="app-container">
            <div class="main-header">
                <h1><i class="fas fa-users-cog"></i> Sistema de Gest√£o de Leads</h1>
                <p>Gerencie seus leads de forma eficiente e organizada</p>
            </div>

            <header class="tab-header">
                <div class="tab-buttons">
                    <button class="tab-button active" data-tab="cadastro">
                        <i class="fas fa-user-plus"></i> Cadastro de Leads
                    </button>
                    <button class="tab-button" data-tab="unidades">
                        <i class="fas fa-plug"></i> Unidades Lead
                    </button>
                    <button class="tab-button" data-tab="historico">
                        <i class="fas fa-history"></i> Hist√≥rico Leads
                    </button>
                    <button class="tab-button" data-tab="proposta">
                        <i class="fas fa-file-invoice"></i> Propostas
                    </button>
                    <button class="tab-button" data-tab="simulacao">
                        <i class="fas fa-calculator"></i> Simula√ß√£o
                    </button>
                    <button class="tab-button" data-tab="dashboard">
                        <i class="fas fa-chart-pie"></i> Dashboard
                    </button>
                    <button class="tab-button" data-tab="parametros">
                        <i class="fas fa-cogs"></i> Par√¢metros
                    </button>
                </div>
            </header>

            <div id="cadastro" class="tab-content active">
                <div id="cadastro-listing-screen" class="screen active">
                    <div class="listing-screen">
                        <div class="listing-header">
                            <h2 class="listing-title">
                                <i class="fas fa-table"></i> Leads Cadastrados
                            </h2>
                            <div class="action-buttons">
                                <button class="btn btn-primary" id="add-lead-btn">
                                    <i class="fas fa-plus"></i> Adicionar Lead
                                </button>
                                <button class="btn btn-secondary" id="refresh-leads-btn">
                                    <i class="fas fa-sync-alt"></i> Atualizar
                                </button>
                            </div>
                        </div>

                        <div class="filter-section">
                            <input type="text" class="filter-input" id="filter-leads" placeholder="üîç Filtrar por qualquer campo...">
                        </div>

                        <div class="table-container">
                            <table id="leads-table">
                                <thead>
                                    <tr>
                                        <th>CPF/CNPJ</th>
                                        <th>Raz√£o Social</th>
                                        <th>Nome Fantasia</th>
                                        <th>Vendedor</th>
                                        <th>Contato</th>
                                        <th>Data Registro</th>
                                        <th>Usu√°rio</th>
                                        <th>A√ß√µes</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="cadastro-form-screen" class="screen">
                    <div class="form-screen">
                        <div class="form-header">
                            <h2 class="form-title" id="cadastro-form-title">
                                <i class="fas fa-user-plus"></i> Cadastro de Leads
                            </h2>
                            <button class="btn btn-back" id="cadastro-back-btn">
                                <i class="fas fa-arrow-left"></i> Voltar
                            </button>
                        </div>

                        <div class="form-subtitle">
                            <p>Preencha os dados abaixo. Campos com * s√£o obrigat√≥rios.</p>
                        </div>

                        <form id="lead-form" autocomplete="off">
                            <input type="hidden" id="lead-id-hidden" name="lead_id_hidden">
                            
                            <div class="form-grid">
                                <div class="input-group">
                                    <label for="cpf_cnpj">CPF/CNPJ*</label>
                                    <input type="text" id="cpf_cnpj" name="Cpf_CnpjLead" placeholder="Apenas n√∫meros">
                                </div>
                                <div class="input-group">
                                    <label for="razao_social">Raz√£o Social*</label>
                                    <input type="text" id="razao_social" name="RazaoSocialLead" placeholder="Ex: ACME LTDA">
                                </div>
                                <div class="input-group">
                                    <label for="nome_fantasia">Nome Fantasia</label>
                                    <input type="text" id="nome_fantasia" name="NomeFantasia" placeholder="Ex: ACME">
                                </div>
                                <div class="input-group">
                                    <label for="cep">CEP</label>
                                    <input type="text" id="cep" name="Cep" placeholder="00000-000">
                                </div>
                                <div class="input-group">
                                    <label for="logradouro">Logradouro</label>
                                    <input type="text" id="logradouro" name="Logradouro" placeholder="Rua, Av, etc.">
                                </div>
                                <div class="input-group">
                                    <label for="numero">N√∫mero</label>
                                    <input type="text" id="numero" name="Numero">
                                </div>
                                <div class="input-group">
                                    <label for="complemento">Complemento</label>
                                    <input type="text" id="complemento" name="Complemento" placeholder="Sala, Bloco, etc.">
                                </div>
                                <div class="input-group">
                                    <label for="bairro">Bairro</label>
                                    <input type="text" id="bairro" name="Bairro">
                                </div>
                                <div class="input-group">
                                    <label for="uf">UF</label>
                                    <select id="uf" name="Uf"><option value="">Carregando...</option></select>
                                </div>
                                <div class="input-group">
                                    <label for="cidade">Cidade</label>
                                    <select id="cidade" name="Cidade" disabled><option value="">Selecione um estado</option></select>
                                </div>
                                <div class="input-group">
                                    <label for="cnae">CNAE</label>
                                    <input type="text" id="cnae" name="Cnae" placeholder="Ex: 4711301">
                                </div>
                                <div class="input-group with-icon">
                                    <label for="data_registro_lead">Data de Registo</label>
                                    <input type="text" id="data_registro_lead" name="DataResgistroLead" class="datepicker-input" readonly placeholder="Clique para selecionar">
                                    <i class="fa-solid fa-calendar-days"></i>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button id="clear-lead-button" type="button" class="btn btn-clear">
                                    <i class="fas fa-eraser"></i> Limpar
                                </button>
                                <button id="save-lead-button" type="submit" class="btn btn-save">
                                    <i class="fas fa-save"></i> Salvar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="unidades" class="tab-content">
                 <div id="unidades-listing-screen" class="screen active">
                    <div class="listing-screen">
                        <div class="listing-header">
                            <h2 class="listing-title">
                                <i class="fas fa-plug"></i> Unidades Consumidoras
                            </h2>
                            <div class="action-buttons">
                                <button class="btn btn-primary" id="add-unidade-btn">
                                    <i class="fas fa-plus"></i> Adicionar Unidade
                                </button>
                                <button class="btn btn-secondary" id="refresh-unidades-btn">
                                    <i class="fas fa-sync-alt"></i> Atualizar
                                </button>
                            </div>
                        </div>

                        <div class="filter-section">
                            <div class="unit-selector-container">
                                <label for="lead-selector">Selecione um Lead para ver as Unidades</label>
                                <select id="lead-selector" class="filter-input">
                                    <option value="">Carregando leads...</option>
                                </select>
                            </div>
                        </div>

                        <div class="table-container">
                            <table id="unidades-table">
                                <thead>
                                    <tr>
                                        <th>N¬∫ UC</th>
                                        <th>Nome da Unidade</th>
                                        <th>CNPJ UC</th>
                                        <th>Logradouro</th>
                                        <th>Cidade</th>
                                        <th>UF</th>
                                        <th>Mercado Atual</th>
                                        <th>A√ß√µes</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                        <div class="historico-preview">
                            <h3><i class="fas fa-chart-line"></i> Hist√≥rico de Consumo da Unidade Selecionada</h3>
                            <div class="table-container">
                                <table id="unidade-historico-table">
                                    <thead>
                                        <tr>
                                            <th>M√™s (Ano)</th>
                                            <th>Demanda CP</th>
                                            <th>Demanda CFP</th>
                                            <th>Demanda CG</th>
                                            <th>kWh Proj Ponta</th>
                                            <th>kWh Proj Fora Ponta</th>
                                            <th>Data Registro</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="unidades-form-screen" class="screen">
                    <div class="form-screen">
                        <div class="form-header">
                            <h2 class="form-title" id="unidades-form-title">
                                <i class="fas fa-plug"></i> Unidades Consumidoras
                            </h2>
                            <button class="btn btn-back" id="unidades-back-btn">
                                <i class="fas fa-arrow-left"></i> Voltar
                            </button>
                        </div>

                        <div class="form-subtitle">
                            <p id="unidades-subtitle">Preencha os dados da unidade consumidora.</p>
                        </div>

                        <form id="unidade-form" autocomplete="off">
                             <input type="hidden" id="unidade-id-original" />
                            <div class="form-grid">
                                <div class="input-group">
                                    <label>N¬∫ da UC*</label>
                                    <input type="text" name="NumeroDaUcLead" placeholder="Apenas n√∫meros">
                                </div>
                                <div class="input-group">
                                    <label>CNPJ Distribuidora</label>
                                    <input type="text" name="CnpjDistribuidora">
                                </div>
                                <div class="input-group">
                                    <label>CNPJ da UC</label>
                                    <input type="text" name="CnpjDaUnidadeConsumidora">
                                </div>
                                <div class="input-group">
                                    <label>Nome da Unidade</label>
                                    <input type="text" name="NomeDaUnidade">
                                </div>
                                <div class="input-group">
                                    <label>Logradouro</label>
                                    <input type="text" name="Logradouro">
                                </div>
                                <div class="input-group">
                                    <label>N√∫mero</label>
                                    <input type="text" name="Numero">
                                </div>
                                <div class="input-group">
                                    <label>Complemento</label>
                                    <input type="text" name="Complemento">
                                </div>
                                <div class="input-group">
                                    <label>Bairro</label>
                                    <input type="text" name="Bairro">
                                </div>
                                <div class="input-group">
                                    <label>CEP</label>
                                    <input type="text" name="Cep">
                                </div>
                                <div class="input-group">
                                    <label>UF</label>
                                    <select name="Uf" class="uf-unidade-select"><option value="">Selecione...</option></select>
                                </div>
                                <div class="input-group">
                                    <label>Cidade</label>
                                    <select name="Cidade" class="cidade-unidade-select" disabled><option value="">Selecione um estado</option></select>
                                </div>
                                <div class="input-group">
                                    <label>Mercado Atual</label>
                                    <input type="text" name="MercadoAtual">
                                </div>
                                <div class="input-group">
                                    <label>Subgrupo Tarif√°rio</label>
                                    <input type="text" name="SubgrupoTarifario">
                                </div>
                                <div class="input-group">
                                    <label>Tarifa</label>
                                    <input type="text" name="Tarifa">
                                </div>
                                <div class="input-group">
                                    <label>Al√≠quota ICMS (%)</label>
                                    <input type="text" name="AliquotaICMS" placeholder="Ex: 18.5">
                                </div>
                                <div class="input-group">
                                    <label>Aplica Conta H√≠drica</label>
                                    <input type="text" name="AplicaContaEHidrica">
                                </div>
                                <div class="input-group">
                                    <label>Liminar ICMS Demanda</label>
                                    <input type="text" name="LiminarICMSDemanda">
                                </div>
                                <div class="input-group">
                                    <label>Liminar ICMS TUSD</label>
                                    <input type="text" name="LiminarICMSTusd">
                                </div>
                                <div class="input-group">
                                    <label>Benef√≠cio Rural (%)</label>
                                    <input type="text" name="BeneficioRuralIrrigacao" placeholder="Ex: 10.0">
                                </div>
                                <div class="input-group">
                                    <label>Rural ou Sazo Reconhecida</label>
                                    <input type="text" name="RuralOuSazoReconhecida">
                                </div>
                                <div class="input-group">
                                    <label>Saldo SCEE</label>
                                    <input type="text" name="SaldoMaisRecenteSCEE" placeholder="Ex: 150.75">
                                </div>
                            </div>

                            <div class="form-actions">
                                <button id="clear-unidade-button" type="button" class="btn btn-clear">
                                    <i class="fas fa-eraser"></i> Limpar
                                </button>
                                <button id="save-unidade-button" type="submit" class="btn btn-save">
                                    <i class="fas fa-save"></i> Salvar Unidade
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="historico" class="tab-content">
                <div id="historico-listing-screen" class="screen active">
                    <div class="listing-screen">
                        <div class="listing-header">
                            <h2 class="listing-title">
                                <i class="fas fa-history"></i> Hist√≥rico de Consumo
                            </h2>
                            <div class="action-buttons">
                                <button class="btn btn-primary" id="manage-historico-btn" disabled>
                                    <i class="fas fa-edit"></i> Gerenciar Hist√≥rico do Ano
                                </button>
                            </div>
                        </div>

                        <div class="filter-section">
                             <div class="form-grid" style="grid-template-columns: 1fr 1fr auto; align-items: end; gap: 15px;">
                                <div class="unit-selector-container">
                                    <label for="historico-lead-selector">1. Selecione um Lead</label>
                                    <select id="historico-lead-selector" class="filter-input">
                                        <option value="">Carregando leads...</option>
                                    </select>
                                </div>
                                <div class="unit-selector-container">
                                    <label for="historico-unidade-selector">2. Selecione a Unidade</label>
                                    <select id="historico-unidade-selector" class="filter-input" disabled>
                                        <option value="">Aguardando sele√ß√£o do lead...</option>
                                    </select>
                                </div>
                                <div class="unit-selector-container">
                                    <label for="historico-ano-selector">3. Selecione o Ano</label>
                                    <input type="number" id="historico-ano-selector" class="filter-input" placeholder="Ex: 2025" disabled>
                                </div>
                            </div>
                        </div>

                        <div class="table-container">
                            <table id="historico-table">
                                <thead>
                                    <tr>
                                        <th>M√™s</th>
                                        <th>Demanda CP</th>
                                        <th>Demanda CFP</th>
                                        <th>Demanda CG</th>
                                        <th>kWh Proj Ponta</th>
                                        <th>kWh Proj Fora Ponta</th>
                                        <th>Data Registro</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td colspan="7" style="text-align: center;">Selecione um Lead, Unidade e Ano para ver o hist√≥rico.</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="historico-form-screen" class="screen">
                    <div class="form-screen">
                        <div class="form-header">
                            <h2 class="form-title" id="historico-form-title">
                                <i class="fas fa-pencil-alt"></i> Gerenciar Hist√≥rico de Consumo
                            </h2>
                            <button class="btn btn-back" id="historico-back-btn">
                                <i class="fas fa-arrow-left"></i> Voltar
                            </button>
                        </div>

                        <div class="form-subtitle">
                            <p id="historico-subtitle">Preencha os dados de consumo para os 12 meses do ano selecionado.</p>
                        </div>

                        <form id="historico-form" autocomplete="off">
                            <input type="hidden" id="historico-form-ano" />
                            <div class="table-container" style="max-height: 60vh;">
                                <table id="historico-input-table">
                                    <thead>
                                        <tr>
                                            <th>M√™s</th>
                                            <th>Demanda CP</th>
                                            <th>Demanda CFP</th>
                                            <th>Demanda CG</th>
                                            <th>kW Proj Ponta</th>
                                            <th>kW Proj Fora Ponta</th>
                                            <th>kWh Proj Ponta</th>
                                            <th>kWh Proj Fora Ponta</th>
                                            <th>kWh Proj HRes</th>
                                            <th>kWh Proj Ponta G</th>
                                            <th>kWh Proj Fora Ponta G</th>
                                            <th>kW Proj G</th>
                                            <th>kWh Proj Diesel P</th>
                                            <th>kWh Compensado P</th>
                                            <th>kWh Compensado FP</th>
                                            <th>kWh Compensado Hr</th>
                                            <th>kW Geracao Projetada</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        </tbody>
                                </table>
                            </div>

                            <div class="form-actions">
                                <button id="save-historico-button" type="submit" class="btn btn-save">
                                    <i class="fas fa-save"></i> Salvar Hist√≥rico Anual
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="proposta" class="tab-content">
                 <div id="proposta-listing-screen" class="screen active">
                    <div class="listing-screen">
                        <div class="listing-header">
                            <h2 class="listing-title">
                                <i class="fas fa-file-invoice"></i> Propostas Cadastradas
                            </h2>
                            <div class="action-buttons">
                                <button class="btn btn-primary" id="add-proposta-btn">
                                    <i class="fas fa-plus"></i> Nova Proposta
                                </button>
                                <button class="btn btn-secondary" id="refresh-propostas-btn">
                                    <i class="fas fa-sync-alt"></i> Atualizar
                                </button>
                            </div>
                        </div>

                        <div class="filter-section">
                            <input type="text" class="filter-input" id="filter-propostas" placeholder="üîç Filtrar propostas...">
                        </div>

                        <div class="table-container">
                            <table id="propostas-table">
                                <thead>
                                    <tr>
                                        <th>N¬∫ Proposta</th>
                                        <th>Agente de Venda</th>
                                        <th>Status</th>
                                        <th>Data do Status</th>
                                        <th>Lead/Unidade</th>
                                        <th>Contato</th>
                                        <th>Usu√°rio</th>
                                        <th>A√ß√µes</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="proposta-form-screen" class="screen">
                    <div class="form-screen">
                        <div class="form-header">
                            <h2 class="form-title" id="proposta-form-title">
                                <i class="fas fa-file-invoice"></i> Nova Proposta
                            </h2>
                            <button class="btn btn-back" id="proposta-back-btn">
                                <i class="fas fa-arrow-left"></i> Voltar
                            </button>
                        </div>

                        <div class="form-subtitle">
                            <p id="proposta-subtitle">Preencha os dados da proposta para o lead selecionado.</p>
                        </div>

                        <form id="proposta-form" autocomplete="off">
                            <fieldset class="fieldset-full-width">
                                <legend><i class="fas fa-user-check"></i> Sele√ß√£o do Lead e Unidade</legend>
                                <div class="form-grid">
                                    <div class="input-group">
                                        <label>Selecione o Lead</label>
                                        <select id="proposta-lead-selector" name="Cpf_CnpjLead">
                                            <option value="">Carregando leads...</option>
                                        </select>
                                    </div>
                                    <div class="input-group">
                                        <label>Selecione a Unidade Consumidora</label>
                                        <select id="proposta-unidade-selector" name="NumeroDaUcLead" disabled>
                                            <option value="">Selecione um lead primeiro</option>
                                        </select>
                                    </div>
                                </div>
                            </fieldset>

                            <fieldset class="fieldset-full-width">
                                <legend><i class="fas fa-file-alt"></i> Dados da Proposta</legend>
                                <div class="form-grid">
                                    <div class="input-group">
                                        <label>N¬∫ Proposta (ser√° gerado automaticamente)</label>
                                        <input type="text" name="NProposta" readonly>
                                    </div>
                                    <div class="input-group">
                                        <label>Agente de Venda</label>
                                        <input type="text" name="AgenteDeVenda">
                                    </div>
                                    <div class="input-group with-icon">
                                        <label>Data de Envio</label>
                                        <input type="text" name="DataDeEnvio" class="datepicker-input" readonly>
                                        <i class="fa-solid fa-calendar-days"></i>
                                    </div>
                                    <div class="input-group with-icon">
                                        <label>Data de Validade</label>
                                        <input type="text" name="DataValidade" class="datepicker-input" readonly>
                                        <i class="fa-solid fa-calendar-days"></i>
                                    </div>
                                    <div class="input-group with-icon">
                                        <label>Data Status Negocia√ß√£o</label>
                                        <input type="text" name="DataStatusNegociacao" class="datepicker-input" readonly>
                                        <i class="fa-solid fa-calendar-days"></i>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <label>Status da Negocia√ß√£o</label>
                                    <textarea name="StatusNegociacao" rows="3"></textarea>
                                </div>
                            </fieldset>

                            <fieldset class="fieldset-full-width">
                                <legend><i class="fas fa-address-card"></i> Contato da Proposta</legend>
                                <div class="form-grid">
                                    <div class="input-group">
                                        <label>Nome do Contato</label>
                                        <input type="text" name="NomeContato">
                                    </div>
                                    <div class="input-group">
                                        <label>Departamento</label>
                                        <input type="text" name="DepartamentoContato">
                                    </div>
                                    <div class="input-group">
                                        <label>Email</label>
                                        <input type="email" name="EmailContato">
                                    </div>
                                    <div class="input-group">
                                        <label>Telefone</label>
                                        <input type="tel" name="TelefoneContato">
                                    </div>
                                    <div class="input-group">
                                        <label>Celular</label>
                                        <input type="tel" name="CelularContato">
                                    </div>
                                </div>
                            </fieldset>
                            
                            <fieldset class="fieldset-full-width">
                                <legend><i class="fas fa-sticky-note"></i> Observa√ß√µes</legend>
                                <div class="form-grid">
                                    <div class="input-group">
                                        <label>Observa√ß√£o</label>
                                        <textarea name="Observacao" rows="4"></textarea>
                                    </div>
                                    <div class="input-group with-icon">
                                        <label>Data da Observa√ß√£o</label>
                                        <input type="text" name="DataObservacao" class="datepicker-input" readonly>
                                        <i class="fa-solid fa-calendar-days"></i>
                                    </div>
                                    <div class="input-group">
                                        <label>Usu√°rio</label>
                                        <input type="text" name="UsuarioObs">
                                    </div>
                                </div>
                            </fieldset>

                            <div class="form-actions">
                                <button id="clear-proposta-button" type="button" class="btn btn-clear">
                                    <i class="fas fa-eraser"></i> Limpar
                                </button>
                                <button id="save-proposta-button" type="submit" class="btn btn-save">
                                    <i class="fas fa-save"></i> Salvar Proposta
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="simulacao" class="tab-content">
                <div class="simulacao-acr-container">
                    <div class="simulacao-header">
                        <h1 class="titulo">Simula√ß√£o ACR</h1>
                        <p class="subtitulo">
                            Selecione os par√¢metros para calcular os custos projetados.
                        </p>
                    </div>

                    <div class="simulacao-card">
                        <div class="simulacao-card-header">
                            <h2 class="simulacao-card-titulo">
                                <i class="fas fa-file-alt"></i>
                                Par√¢metros da Simula√ß√£o
                            </h2>
                        </div>
                        <div class="card-content">
                            <div class="simulacao-grid-col-2">
                                
                                <div class="simulacao-input-group" style="grid-column: 1 / -1;">
                                    <label style="text-align: center; margin-bottom: 5px; font-weight: 600;">Tipo de Simula√ß√£o</label>
                                    <div class="radio-group">
                                        <label for="tipo-cliente">
                                            <input type="radio" id="tipo-cliente" name="tipo_simulacao" value="cliente" checked> Cliente Existente
                                        </label>
                                        <label for="tipo-lead">
                                            <input type="radio" id="tipo-lead" name="tipo_simulacao" value="lead"> Novo Lead (Estimado)
                                        </label>
                                    </div>
                                </div>

                                <div class="simulacao-input-group">
                                    <label>Lead / Cliente</label>
                                    <select id="simulacao-lead-selector">
                                        <option value="">Selecione...</option>
                                    </select>
                                </div>
                                <div class="simulacao-input-group">
                                    <label>Unidade Consumidora</label>
                                    <select id="simulacao-unidade-selector" disabled>
                                        <option value="">Selecione um lead/cliente</option>
                                    </select>
                                </div>
                            </div>
                            
                            <fieldset class="periodo-container">
                                <legend><i class="fas fa-calendar-alt"></i> Per√≠odo da Simula√ß√£o</legend>
                                <div class="periodo-rapido-botoes">
                                    <button class="btn-periodo-rapido" data-meses="12">Pr√≥ximos 12 meses</button>
                                    <button class="btn-periodo-rapido" data-meses="24">24 meses</button>
                                    <button class="btn-periodo-rapido" data-meses="36">36 meses</button>
                                </div>
                                <div class="periodo-datas">
                                    <div class="input-group with-icon">
                                        <label>Data de In√≠cio</label>
                                        <input type="text" id="simulacao-data-inicio" class="datepicker-input" readonly placeholder="dd/mm/aaaa">
                                        <i class="fa-solid fa-calendar-days"></i>
                                    </div>
                                    <div class="input-group with-icon">
                                        <label>Data de Fim</label>
                                        <input type="text" id="simulacao-data-fim" class="datepicker-input" readonly placeholder="dd/mm/aaaa">
                                        <i class="fa-solid fa-calendar-days"></i>
                                    </div>
                                </div>
                            </fieldset>

                            <div id="simulacao-lead-inputs" class="hidden">
                                <h4 class="dados-titulo"><i class="fas fa-keyboard"></i> Inserir Dados para Novo Lead</h4>
                                <div class="simulacao-grid-col-2">
                                     <div class="simulacao-input-group">
                                        <label>Consumo Mensal Estimado (kWh)</label>
                                        <input type="number" id="lead-consumo-estimado" placeholder="Ex: 5000">
                                    </div>
                                     <div class="simulacao-input-group">
                                        <label>Demanda Estimada (kW)</label>
                                        <input type="number" id="lead-demanda-estimada" placeholder="Ex: 30">
                                    </div>
                                </div>
                            </div>

                            <div id="simulacao-dados-automaticos" class="dados-resumo hidden">
                                <h4 class="dados-titulo"><i class="fas fa-bolt"></i> Dados da Unidade Selecionada</h4>
                                <div class="simulacao-grid-col-3">
                                    <div><span class="label-info">Tarifa:</span><span id="simulacao-info-tarifa" class="badge">--</span></div>
                                    <div><span class="label-info">Subgrupo:</span><span id="simulacao-info-demanda" class="info-valor">--</span></div>
                                    <div><span class="label-info">Impostos:</span><span id="simulacao-info-impostos" class="info-valor">--</span></div>
                                    <div><span class="label-info">Mercado:</span><span id="simulacao-info-mercado" class="info-valor">--</span></div>
                                </div>
                            </div>

                            <div class="btn-container">
                                <button id="simulacao-calcular-btn" class="btn-principal" disabled>
                                    <i id="simulacao-btn-icon" class="fas fa-calculator"></i>
                                    <span id="simulacao-btn-text">Calcular Custo</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div id="simulacao-historico-container" class="simulacao-card hidden">
                        <div class="simulacao-card-header">
                            <h2 class="simulacao-card-titulo">
                                <i class="fas fa-chart-line"></i> Hist√≥rico de Consumo (√öltimos 13 Meses)
                            </h2>
                        </div>
                        <div class="card-content">
                            <canvas id="simulacao-historico-chart"></canvas>
                        </div>
                    </div>

                    <div id="simulacao-resultado-container" class="simulacao-card card-resultado hidden">
                        <div class="simulacao-card-header text-center">
                            <h2 class="simulacao-card-titulo"><i class="fas fa-chart-line"></i> Resultado da Simula√ß√£o</h2>
                            <p id="simulacao-resultado-descricao" class="simulacao-card-descricao">An√°lise para...</p>
                        </div>
                        <div class="card-content">
                            <div class="resultado-principal">
                                <div id="simulacao-label-custo-total" class="label-info">Custo Total no Per√≠odo</div>
                                <div id="simulacao-resultado-custo-anual" class="valor-principal">R$ 0,00</div>
                            </div>
                            <div class="simulacao-grid-col-3">
                                <div class="metrica">
                                    <div class="label-info">Custo M√©dio Mensal</div>
                                    <div id="simulacao-resultado-custo-mensal" class="valor-secundario">R$ 0,00</div>
                                </div>
                                <div class="metrica">
                                    <div class="label-info">Consumo Total no Per√≠odo</div>
                                    <div id="simulacao-resultado-consumo-anual" class="valor-secundario">0 kWh</div>
                                </div>
                                <div class="metrica">
                                    <div class="label-info">Demanda M√©dia</div>
                                    <div id="simulacao-resultado-demanda-media" class="valor-secundario">0 kW</div>
                                </div>
                            </div>
                            <hr class="separator">
                            <div class="btn-container">
                                <button id="simulacao-toggle-detalhes-btn" class="btn-secundario">Ver Detalhes Mensais</button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="simulacao-tabela-detalhada-container" class="simulacao-card hidden">
                        <div class="simulacao-card-header">
                            <h2 class="simulacao-card-titulo">Detalhamento Mensal Projetado</h2>
                        </div>
                        <div class="card-content">
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>M√™s</th>
                                            <th class="text-right">Consumo (kWh)</th>
                                            <th class="text-right">Demanda (kW)</th>
                                            <th class="text-right">Custo Consumo</th>
                                            <th class="text-right">Custo Demanda</th>
                                            <th class="text-right">Impostos</th>
                                            <th class="text-right font-semibold">Total</th>
                                        </tr>
                                    </thead>
                                    <tbody id="simulacao-tabela-detalhada-tbody"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="dashboard" class="tab-content">
                 <main class="container">
                    <header class="report-header">
                        <h1><i class="fas fa-chart-pie"></i> An√°lise de Viabilidade Econ√¥mica</h1>
                        <p>
                            Relat√≥rio para: <strong id="report-lead-name">[Nome do Lead]</strong> | 
                            Unidade: <strong id="report-unit-name">[N√∫mero/Nome da Unidade]</strong>
                        </p>
                    </header>
            
                    <section class="resultados-grid">
                        <div class="card-resultado custo-atual">
                            <h4>Custo Atual (Mercado Cativo)</h4>
                            <p id="resultado-custo-atual">R$ 0,00</p>
                            <span id="resultado-custo-atual-desc"></span>
                        </div>
                        <div class="card-resultado custo-simulado">
                            <h4>Custo Simulado (Mercado Livre)</h4>
                            <p id="resultado-custo-simulado">R$ 0,00</p>
                            <span>Baseado em desconto de 15%</span>
                        </div>
                        <div class="card-resultado economia">
                            <h4>Economia no Per√≠odo</h4>
                            <p id="resultado-economia-reais">R$ 0,00</p>
                            <span id="resultado-economia-percentual">(0,00%)</span>
                        </div>
                    </section>
            
                    <section class="widget">
                        <h3><i class="fas fa-chart-bar"></i> Comparativo de Custo Mensal</h3>
                        <div class="chart-container">
                            <canvas id="simulador-grafico-economia"></canvas>
                        </div>
                    </section>
            
                    <section class="widget">
                        <h3><i class="fas fa-list-ol"></i> Detalhamento M√™s a M√™s</h3>
                        <div class="table-container">
                            <table id="detalhes-simulacao-table">
                                <thead>
                                    <tr>
                                        <th>M√™s</th>
                                        <th>Custo Atual (R$)</th>
                                        <th>Custo Simulado (R$)</th>
                                        <th class="coluna-economia">Economia (R$)</th>
                                    </tr>
                                </thead>
                                <tbody id="detalhes-tbody"></tbody>
                                <tfoot>
                                    <tr>
                                        <th>Total no Per√≠odo</th>
                                        <td id="total-atual">R$ 0,00</td>
                                        <td id="total-simulado">R$ 0,00</td>
                                        <td class="coluna-economia" id="total-economia">R$ 0,00</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </section>
                </main>
            </div>

            <div id="parametros" class="tab-content">
                <div class="form-screen">
                    <div class="sub-nav">
                        <button class="sub-nav-button active" data-sub-tab="simulacao-precos">Simula√ß√£o e Pre√ßos</button>
                        <button class="sub-nav-button" data-sub-tab="ajustes">Ajustes</button>
                        <button class="sub-nav-button" data-sub-tab="geracao">Gera√ß√£o</button>
                    </div>

                    <div id="sub-tab-simulacao-precos" class="sub-tab-content active">
                        <div class="listing-header" style="margin-bottom: 20px; border-bottom: none;">
                            <h2 class="listing-title" style="font-size: 1.8rem;">
                                <i class="fas fa-cogs"></i> Par√¢metros de Simula√ß√£o
                            </h2>
                        </div>

                        <fieldset>
                            <legend><i class="fas fa-user-tag"></i> Par√¢metros do Cliente (tbl_P_01_01_01_Clientes)</legend>
                            <form id="form-param-clientes">
                                <div class="form-grid">
                                    <div class="input-group">
                                        <label for="param-cliente-select">Cliente</label>
                                        <select id="param-cliente-select" name="Cliente">
                                            <option value="">Selecione um cliente/lead...</option>
                                        </select>
                                    </div>
                                    <div class="input-group with-icon">
                                        <label for="param-data-inicial">Data Inicial da Simula√ß√£o</label>
                                        <input type="text" id="param-data-inicial" name="DataInicialSimula" class="datepicker-input" readonly>
                                        <i class="fa-solid fa-calendar-days"></i>
                                    </div>
                                    <div class="input-group with-icon">
                                        <label for="param-data-final">Data Final da Simula√ß√£o</label>
                                        <input type="text" id="param-data-final" name="DataFinalSimula" class="datepicker-input" readonly>
                                        <i class="fa-solid fa-calendar-days"></i>
                                    </div>
                                    <div class="input-group">
                                        <label for="param-tipo-geracao">Tipo de Gera√ß√£o</label>
                                        <select id="param-tipo-geracao" name="TipoGeracao">
                                            <option value="Hidrica">H√≠drica</option>
                                            <option value="Solar">Solar</option>
                                            <option value="Eolica">E√≥lica</option>
                                            <option value="Termica">T√©rmica</option>
                                        </select>
                                    </div>
                                    <div class="input-group" style="justify-content: center;">
                                        <label for="param-incluir-grupob" style="display: flex; align-items: center; cursor: pointer;">
                                            <input type="checkbox" id="param-incluir-grupob" name="IncluirGrupoB" style="width: auto; margin-right: 10px;">
                                            Incluir Grupo B na Simula√ß√£o?
                                        </label>
                                    </div>
                                </div>
                            </form>
                        </fieldset>

                        <fieldset>
                            <legend><i class="fas fa-sliders-h"></i> Par√¢metros Gerais da Simula√ß√£o (tbl_P_01_01_03_DadosSimulacao)</legend>
                            <form id="form-param-gerais">
                                <div class="form-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                                    <div class="input-group"><label for="param-pis">PIS (%)</label><input type="number" step="0.01" id="param-pis" name="Pis" placeholder="Ex: 1.65"></div>
                                    <div class="input-group"><label for="param-cofins">COFINS (%)</label><input type="number" step="0.01" id="param-cofins" name="Cofins" placeholder="Ex: 7.60"></div>
                                    <div class="input-group"><label for="param-custo-garantia">Custo Garantia (%)</label><input type="number" step="0.01" id="param-custo-garantia" name="PctCustoGarantia" placeholder="Ex: 5.0"></div>
                                    <div class="input-group"><label for="param-meses-garantia">Meses de Garantia</label><input type="number" id="param-meses-garantia" name="MesesGarantia" placeholder="Ex: 12"></div>
                                    <div class="input-group"><label for="param-perdas">Perdas (%)</label><input type="number" step="0.01" id="param-perdas" name="Perdas" placeholder="Ex: 8.0"></div>
                                    <div class="input-group"><label for="param-fonte-base">Fonte Energia Base</label><select id="param-fonte-base" name="FonteEnergiaBase"><option value="I0">I0</option><option value="I1">I1</option></select></div>
                                    <div class="input-group"><label for="param-preco-diesel">Pre√ßo Diesel (R$/L)</label><input type="number" step="0.01" id="param-preco-diesel" name="PrecoDiesel" placeholder="Ex: 6.50"></div>
                                    <div class="input-group"><label for="param-rendimento-gerador">Rendimento Gerador</label><input type="number" step="0.01" id="param-rendimento-gerador" name="RendimentoGerador" placeholder="Ex: 0.95"></div>
                                </div>
                            </form>
                        </fieldset>

                        <fieldset>
                            <legend><i class="fas fa-dollar-sign"></i> Tabela de Pre√ßos por MWh (tbl_P_01_01_04_PrecoMWhAno)</legend>
                            <div class="table-container" style="max-height: 250px;"><table id="table-precos-ano"><thead><tr><th>Ano</th><th>Fonte</th><th>Pre√ßo (R$/MWh)</th><th>Corrigir por</th><th>A√ß√µes</th></tr></thead><tbody></tbody></table></div>
                        </fieldset>
                        
                        <fieldset>
                            <legend><i class="fas fa-file-invoice-dollar"></i> Tabela de Custos Base (tbl_P_01_01_02_CustosBaseMes)</legend>
                            <div class="table-container" style="max-height: 250px;"><table id="table-custos-mes"><thead><tr><th>M√™s Ref.</th><th>Liq. MCPA-CL</th><th>Liq. MCPA-PE</th><th>Liq. Ener. Reserva</th><th>Liq. RCAP</th><th>Spread Venda</th><th>Modelagem</th><th>A√ß√µes</th></tr></thead><tbody></tbody></table></div>
                        </fieldset>
                    </div>

                    <div id="sub-tab-ajustes" class="sub-tab-content">
                        <fieldset>
                            <legend><i class="fas fa-chart-line"></i> Ajuste de IPCA Anual</legend>
                            <div class="action-buttons" style="justify-content: flex-end; margin-bottom: 15px;">
                                <button id="add-ipca-btn" class="btn btn-primary btn-sm"><i class="fas fa-plus"></i> Adicionar Ajuste IPCA</button>
                            </div>
                            <div class="table-container" style="max-height: 300px;">
                                <table id="table-ajuste-ipca">
                                    <thead><tr><th>Ano</th><th>Percentual IPCA (%)</th><th>A√ß√µes</th></tr></thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </fieldset>

                        <fieldset>
                            <legend><i class="fas fa-bolt"></i> Ajuste de Tarifas por Distribuidora</legend>
                             <div class="input-group" style="margin-bottom: 20px; max-width: 400px;">
                                <label for="ajuste-tarifa-distribuidora-select">Selecione a Distribuidora</label>
                                <select id="ajuste-tarifa-distribuidora-select">
                                    <option value="">Carregando...</option>
                                </select>
                            </div>
                            <div class="table-container" style="max-height: 400px;">
                                <table id="table-ajuste-tarifa">
                                    <thead>
                                        <tr>
                                            <th>Ano</th>
                                            <th>% TUSD kW P</th>
                                            <th>% TUSD kW FP</th>
                                            <th>% TUSD MWh P</th>
                                            <th>% TUSD MWh FP</th>
                                            <th>% TE MWh P</th>
                                            <th>% TE MWh FP</th>
                                            <th>A√ß√µes</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </fieldset>
                    </div>
                    <div id="sub-tab-geracao" class="sub-tab-content">
                        <fieldset>
                            <legend><i class="fas fa-bolt"></i> Dados de Gera√ß√£o Anual (tbl_P_03_01_01_DadosGeracao)</legend>
                            <div class="table-container" style="max-height: 250px;">
                                <table id="table-dados-geracao">
                                    <thead>
                                        <tr>
                                            <th>Fonte</th>
                                            <th>Local</th>
                                            <th>Volume (MWh/Ano)</th>
                                            <th>Pre√ßo (R$/MWh)</th>
                                            <th>A√ß√µes</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </fieldset>

                        <fieldset>
                            <legend><i class="fas fa-chart-line"></i> Curva de Sazonaliza√ß√£o (tbl_P_03_01_02_CurvaGeracao)</legend>
                            <div class="table-container" style="max-height: 300px;">
                                <table id="table-curva-geracao">
                                    <thead>
                                        <tr>
                                            <th>M√™s/Ano (ID)</th>
                                            <th>Fonte</th>
                                            <th>Local</th>
                                            <th>% Sazonaliza√ß√£o</th>
                                            <th>A√ß√µes</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </fieldset>
                    </div>

                    <div class="form-actions">
                        <button id="save-all-params" class="btn btn-save"><i class="fas fa-save"></i> Salvar Todos os Par√¢metros</button>
                    </div>
                </div>
            </div>

        </main>
    </div>

 <div id="vendedor-modal" class="modal-overlay hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2><i class="fas fa-user-tie"></i> Vendedor e Contato</h2>
                    <button id="close-vendedor-modal" class="close-button">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="vendedor-contato-form">
                        <fieldset>
                            <legend>Vendedor Respons√°vel</legend>
                            <div class="form-grid">
                                <div class="input-group"><label>Vendedor*</label><input type="text" name="Vendedor"></div>
                                <div class="input-group with-icon"><label>Data de Envio*</label><input type="text" name="DataEnvio" class="datepicker-input" readonly placeholder="Clique para selecionar"><i class="fa-solid fa-calendar-days"></i></div>
                                <div class="input-group with-icon"><label>Validade do Lead*</label><input type="text" name="DataValidade" class="datepicker-input" readonly placeholder="Clique para selecionar"><i class="fa-solid fa-calendar-days"></i></div>
                            </div>
                        </fieldset>
                        <fieldset>
                            <legend>Contato Principal</legend>
                            <div class="form-grid">
                                <div class="input-group"><label>Nome do Contato*</label><input type="text" name="NomeContato"></div>
                                <div class="input-group"><label>E-mail</label><input type="email" name="Email"></div>
                                <div class="input-group"><label>Telefone</label><input type="tel" name="Telefone"></div>
                            </div>
                        </fieldset>
                    </form>
                </div>
                <div class="modal-footer">
                    <button id="save-vendedor-contato" type="submit" form="vendedor-contato-form" class="btn btn-save">
                        <i class="fas fa-save"></i> Salvar Informa√ß√µes
                    </button>
                </div>
            </div>
        </div>

        <div id="calendar-modal" class="modal-overlay hidden">
            <div class="modal-content" id="calendar-container">
                <div id="calendar-wrapper"></div>
            </div>
        </div>

        <div id="ipca-modal" class="modal-overlay hidden">
            <div class="modal-content" style="max-width: 500px;">
                <div class="modal-header">
                    <h2 id="ipca-modal-title"><i class="fas fa-plus"></i> Adicionar Ajuste IPCA</h2>
                    <button id="close-ipca-modal" class="close-button">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="ipca-form" autocomplete="off">
                        <input type="hidden" id="ipca-ano-original" name="AnoOriginal">
                        <div class="input-group">
                            <label for="ipca-ano">Ano*</label>
                            <input type="number" id="ipca-ano" name="Ano" placeholder="Ex: 2025" required>
                        </div>
                        <div class="input-group" style="margin-top: 15px;">
                            <label for="ipca-percentual">Percentual IPCA (%)*</label>
                            <input type="number" id="ipca-percentual" name="PctIPCA" step="0.01" placeholder="Ex: 5.75" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button id="cancel-ipca-button" type="button" class="btn btn-secondary">Cancelar</button>
                    <button id="save-ipca-button" type="submit" form="ipca-form" class="btn btn-save">
                        <i class="fas fa-save"></i> Salvar
                    </button>
                </div>
            </div>
        </div>

        <div id="preco-mwh-modal" class="modal-overlay hidden">
            <div class="modal-content" style="max-width: 600px;">
                <div class="modal-header">
                    <h2 id="preco-mwh-modal-title"><i class="fas fa-edit"></i> Editar Pre√ßo por MWh</h2>
                    <button id="close-preco-mwh-modal" class="close-button">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="preco-mwh-form" autocomplete="off">
                        <input type="hidden" id="preco-mwh-ano-original">
                        <input type="hidden" id="preco-mwh-fonte-original">
                        
                        <div class="form-grid">
                            <div class="input-group">
                                <label for="preco-mwh-ano">Ano*</label>
                                <input type="number" id="preco-mwh-ano" name="Ano" required readonly>
                            </div>
                            <div class="input-group">
                                <label for="preco-mwh-fonte">Fonte*</label>
                                <input type="text" id="preco-mwh-fonte" name="Fonte" required readonly>
                            </div>
                            <div class="input-group">
                                <label for="preco-mwh-preco">Pre√ßo (R$/MWh)*</label>
                                <input type="text" id="preco-mwh-preco" name="PrecoRS_MWh" placeholder="Ex: 250,50" required>
                            </div>
                            <div class="input-group">
                                <label for="preco-mwh-corrigir">Corrigir por</label>
                                <select id="preco-mwh-corrigir" name="Corrigir">
                                    <option value="">Nenhum</option>
                                    <option value="IPCA">IPCA</option>
                                    <option value="IGPM">IGPM</option>
                                </select>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button id="cancel-preco-mwh-button" type="button" class="btn btn-secondary">Cancelar</button>
                    <button id="save-preco-mwh-button" type="submit" form="preco-mwh-form" class="btn btn-save">
                        <i class="fas fa-save"></i> Salvar Altera√ß√µes
                    </button>
                </div>
            </div>
        </div>

    <div id="custos-mes-modal" class="modal-overlay hidden">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2><i class="fas fa-edit"></i> Editar Custos Base do M√™s</h2>
                <button id="close-custos-mes-modal" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <form id="custos-mes-form" autocomplete="off">
                    <input type="hidden" id="custos-mes-ref-original">
                    <div class="form-grid" style="grid-template-columns: 1fr 1fr;">
                        <div class="input-group">
                            <label>M√™s de Refer√™ncia</label>
                            <input type="text" id="custos-mes-ref" name="MesRef" readonly>
                        </div>
                    </div>
                    <div class="form-grid" style="grid-template-columns: repeat(3, 1fr);">
                        <div class="input-group"><label>Liq. MCPA-CL</label><input type="text" name="LiqMCPACL"></div>
                        <div class="input-group"><label>Liq. MCPA-PE</label><input type="text" name="LiqMCPAPE"></div>
                        <div class="input-group"><label>Liq. Ener. Reserva</label><input type="text" name="LiqEnerReserva"></div>
                        <div class="input-group"><label>Liq. RCAP</label><input type="text" name="LiqRCAP"></div>
                        <div class="input-group"><label>Spread Venda</label><input type="text" name="SpreadVenda"></div>
                        <div class="input-group"><label>Modelagem</label><input type="text" name="ModelagemMes"></div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="cancel-custos-mes-button" type="button" class="btn btn-secondary">Cancelar</button>
                <button id="save-custos-mes-button" type="submit" form="custos-mes-form" class="btn btn-save">
                    <i class="fas fa-save"></i> Salvar Altera√ß√µes
                </button>
            </div>
        </div>
    </div>

    <div id="ajuste-tarifa-modal" class="modal-overlay hidden">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2><i class="fas fa-edit"></i> Editar Ajuste de Tarifa</h2>
                <button id="close-ajuste-tarifa-modal" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <form id="ajuste-tarifa-form" autocomplete="off">
                    <input type="hidden" id="ajuste-tarifa-cnpj-original">
                    <input type="hidden" id="ajuste-tarifa-ano-original">
                    <div class="form-grid" style="grid-template-columns: 1fr 1fr;">
                         <div class="input-group"><label>Distribuidora (CNPJ)</label><input type="text" name="CnpjDistribuidora" readonly></div>
                         <div class="input-group"><label>Ano</label><input type="number" name="Ano" readonly></div>
                    </div>
                     <div class="form-grid" style="grid-template-columns: repeat(3, 1fr);">
                        <div class="input-group"><label>% TUSD kW P</label><input type="text" name="PctTusdkWP"></div>
                        <div class="input-group"><label>% TUSD kW FP</label><input type="text" name="PctTusdkWFP"></div>
                        <div class="input-group"><label>% TUSD MWh P</label><input type="text" name="PctTusdMWhP"></div>
                        <div class="input-group"><label>% TUSD MWh FP</label><input type="text" name="PctTusdMWhFP"></div>
                        <div class="input-group"><label>% TE MWh P</label><input type="text" name="PctTEMWhP"></div>
                        <div class="input-group"><label>% TE MWh FP</label><input type="text" name="PctTEMWhFP"></div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="cancel-ajuste-tarifa-button" type="button" class="btn btn-secondary">Cancelar</button>
                <button id="save-ajuste-tarifa-button" type="submit" form="ajuste-tarifa-form" class="btn btn-save">
                    <i class="fas fa-save"></i> Salvar Altera√ß√µes
                </button>
            </div>
        </div>
    </div>

    <div id="dados-geracao-modal" class="modal-overlay hidden">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2><i class="fas fa-edit"></i> Editar Dados de Gera√ß√£o</h2>
                <button id="close-dados-geracao-modal" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <form id="dados-geracao-form" autocomplete="off">
                    <input type="hidden" id="dados-geracao-fonte-original">
                    <input type="hidden" id="dados-geracao-local-original">
                    <div class="form-grid">
                        <div class="input-group"><label>Fonte</label><input type="text" name="Fonte" readonly></div>
                        <div class="input-group"><label>Local</label><input type="text" name="Local" readonly></div>
                        <div class="input-group"><label>Volume (MWh/Ano)</label><input type="text" name="VolumeMWhAno"></div>
                        <div class="input-group"><label>Pre√ßo (R$/MWh)</label><input type="text" name="PrecoRS_MWh"></div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="cancel-dados-geracao-button" type="button" class="btn btn-secondary">Cancelar</button>
                <button id="save-dados-geracao-button" type="submit" form="dados-geracao-form" class="btn btn-save">
                    <i class="fas fa-save"></i> Salvar Altera√ß√µes
                </button>
            </div>
        </div>
    </div>

    <div id="curva-geracao-modal" class="modal-overlay hidden">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2><i class="fas fa-edit"></i> Editar Curva de Sazonaliza√ß√£o</h2>
                <button id="close-curva-geracao-modal" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <form id="curva-geracao-form" autocomplete="off">
                    <input type="hidden" id="curva-geracao-idmes-original">
                    <input type="hidden" id="curva-geracao-fonte-original">
                    <input type="hidden" id="curva-geracao-local-original">
                    <div class="form-grid">
                        <div class="input-group"><label>M√™s/Ano (ID)</label><input type="text" name="IdMes" readonly></div>
                        <div class="input-group"><label>Fonte</label><input type="text" name="Fonte" readonly></div>
                        <div class="input-group"><label>Local</label><input type="text" name="Local" readonly></div>
                        <div class="input-group"><label>% Sazonaliza√ß√£o</label><input type="text" name="PctSazonalizacaoMes"></div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="cancel-curva-geracao-button" type="button" class="btn btn-secondary">Cancelar</button>
                <button id="save-curva-geracao-button" type="submit" form="curva-geracao-form" class="btn btn-save">
                    <i class="fas fa-save"></i> Salvar Altera√ß√µes
                </button>
            </div>
        </div>
    </div>

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> 
        <script src="script.js"></script>
    </body>
    </html>